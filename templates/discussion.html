<!-- templates/discussion.html -->
{{define "reply"}}
<li>
    <p>{{.Body}} - by <b>{{.Owner.Profile.Username}}</b>#{{.Owner.Profile.Discriminator}} at {{.CreatedAt}}</p>
    <p><a href="/new_reply/{{$.DiscussionID}}?parent_id={{.ID}}">Reply to this comment</a></p>
    {{if .Children}}
    <ul>
        {{range .Children}}
            {{template "reply" .}}
        {{end}}
    </ul>
    {{end}}
</li>
{{end}}

<!DOCTYPE html>
<html>
<head>
    <title>Discussion</title>
    <link rel="stylesheet" href="/static/water.css">
</head>
<body>
    <nav>
        <img src="static/monkfish.svg" width=32px height=32px />
        <a href="/">Home</a>&emsp;
        <a href="/discussions">Discussions</a>&emsp;
        <a href="/settings">Settings</a>&emsp;
        <a href="/register" style="float:inline-end">Register&emsp;</a>
        <a href="/login"  style="float:inline-end">Login&emsp;</a>
      </nav>
    <h1>{{.Discussion.Title}}</h1>
    <p><b>{{.Discussion.Owner.Profile.Username}}</b>#{{.Discussion.Owner.Profile.Discriminator}} at {{.Discussion.CreatedAt}}</p>
    <p>{{.Discussion.Body}}</p>
    <p><a href="/new_reply/{{.DiscussionID}}">Reply to the discussion</a></p>
    <h2>Replies</h2>
    <ul>
        {{range .Discussion.Replies}}
            {{template "reply" .}}
        {{end}}
    </ul>
</body>
</html>
